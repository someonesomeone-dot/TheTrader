<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Card Trading Game</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Audio Elements -->
  <audio id="bgMusic" loop>
    <source src="game-176807.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
  <audio id="gameOverMusic">
    <source src="game-over-252897.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <!-- Main Menu -->
  <div id="menu" class="page">
    <h1>The Trader</h1>
    <button id="howtoplaybutton" onclick="showHowToPlay()">How to Play</button>
    <!-- Changed onclick to assignRole() so we automatically assign a role -->
    <button id="startgamebutton" onclick="assignRole()">Start Game</button>
    <button id="settingsbutton" onclick="showSettings()">Settings</button>
    <button id="creditsbutton" onclick="showCredits()">Credits</button>
    <!-- Menu image placed below the buttons -->
    <img id="menu-image" src="https://cdn-icons-png.flaticon.com/512/1006/1006555.png" alt="Menu Image">
  </div>

  <!-- How To Play Page -->
  <div id="howToPlayPage" class="page hidden">
    <h1>How To Play</h1>
    <div class="howToPlayContent">
      <p>In this game, you and 3 bots are each assigned a role:</p>
      <ul>
        <li><strong>Businessman</strong>: Aim for the highest total sum.</li>
        <li><strong>Diplomat</strong>: Your goal is a middle total (neither highest nor lowest).</li>
        <li><strong>Athlete</strong>: Aim for the lowest total sum.</li>
      </ul>
      <p>
        The game lasts 10 rounds. In each round, you draw a card (from 1–100) which is added to your hand. Then select a card from your hand and choose a bot to attempt a trade. If a trade is accepted, you swap your card for a new card from the deck; if rejected, your card is kept and added to your total. You may also manually “Keep Selected Card” (up to 2 times per game).
      </p>
    </div>
    <button onclick="assignRole()">Proceed to Role Assignment</button>
    <button onclick="goToMenu()">Back to Menu</button>
  </div>

  <!-- Role Assignment Page -->
  <div id="roleAssignmentPage" class="page hidden">
    <h1>Your Role Assignment</h1>
    <p>You will be randomly assigned a role.</p>
    <!-- The player clicks this button to get a role (it will be disabled after clicking) -->
    <button id="assignRoleBtn" onclick="assignRole()">Get My Role</button>
    <div id="assignedRole" class="hidden">
      <p id="roleAnnouncement" style="font-size:2em; font-weight:bold;"></p>
    </div>
    <button onclick="goToMenu()">Back to Menu</button>
  </div>

  <!-- Game Page -->
  <div id="gamePage" class="page hidden">
    <h1>Ready, Let's Go!</h1>
    <!-- Avatar display for bots and player -->
    <div id="avatarContainer">
      <div class="avatar" id="avatarBot1">Bot 1</div>
      <div class="avatar" id="avatarBot2">Bot 2</div>
      <div class="avatar" id="avatarBot3">Bot 3</div>
      <div class="avatar" id="avatarPlayer">You</div>
    </div>
    <div id="gameArea">
      <!-- Your Hand displayed on the left -->
      <div id="playerHandContainer">
        <h3>Your Hand</h3>
        <div id="playerHand"></div>
      </div>
      <!-- Controls and trade options on the right -->
      <div id="controls">
        <p>Your Role: <span id="playerRole">-</span></p>
        <p>Your Total Sum: <span id="playerSum">0</span></p>
        <p>Round: <span id="roundCounter">1</span> / 10</p>
        <button id="drawCardBtn" onclick="drawCard()">Draw Card</button>
        <!-- Bot selection panel for trading -->
        <div id="botSelection" class="hidden">
          <p>Select a Bot to trade with:</p>
          <button class="botBtn" style="background-color: #e74c3c;" onclick="initiateTrade(1)">Bot 1</button>
          <button class="botBtn" style="background-color: #3498db;" onclick="initiateTrade(2)">Bot 2</button>
          <button class="botBtn" style="background-color: #2ecc71;" onclick="initiateTrade(3)">Bot 3</button>
          <button onclick="keepSelectedCard()">Keep Selected Card</button>
        </div>
      </div>
    </div>
    <div id="message" class="hidden"></div>
    <button onclick="goToMenu()">Back to Menu</button>
  </div>

  <!-- End Game Page -->
  <div id="endGamePage" class="page hidden">
    <h1>Game Over</h1>
    <div id="guessSidebar">
      <h2>Guess Bot Roles</h2>
      <p>For each correct guess, you'll receive an adjustment of 5 points.<br>
         (If you are a Diplomat and your score is below average, you add 5 points per correct guess; if above average, you deduct 5 points per correct guess.)</p>
      <form id="guessForm">
        <label>Bot 1: </label>
        <select id="guessBot1">
          <option value="">Select</option>
          <option value="Businessman">Businessman</option>
          <option value="Diplomat">Diplomat</option>
          <option value="Athlete">Athlete</option>
        </select><br>
        <label>Bot 2: </label>
        <select id="guessBot2">
          <option value="">Select</option>
          <option value="Businessman">Businessman</option>
          <option value="Diplomat">Diplomat</option>
          <option value="Athlete">Athlete</option>
        </select><br>
        <label>Bot 3: </label>
        <select id="guessBot3">
          <option value="">Select</option>
          <option value="Businessman">Businessman</option>
          <option value="Diplomat">Diplomat</option>
          <option value="Athlete">Athlete</option>
        </select><br>
        <button type="button" onclick="applyGuessAdjustments()">Submit Guesses</button>
      </form>
    </div>
    <div id="results"></div>
    <button onclick="goToMenu()">Back to Menu</button>
  </div>

  <!-- Settings Page -->
  <div id="settingsPage" class="page hidden">
    <h1>Settings</h1>
    <p>Volume: <input type="range" id="volumeControl" min="0" max="1" step="0.01"></p>
    <button onclick="goToMenu()">Back to Menu</button>
  </div>

  <!-- Credits Page -->
  <div id="creditsPage" class="page hidden">
    <h1>Credits</h1>
    <p>
      <b>Concept and code by:</b> Joshua<br><br>
      <b>Testimonials:</b><br>"Stunning." - Benjamin<br><br>
      For any copyright claims, please contact our helpdesk at thetraderenquiries.com.sg
    </p>
    <button onclick="goToMenu()">Back to Menu</button>
  </div>

  <script src="script.js"></script>
</body>
</html>
